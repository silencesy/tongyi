<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Refund</title>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="stylesheet" href="../static/css/mui.min.css">
	<link rel="stylesheet" href="../static/css/style.css">
	<!-- 字体图标 -->
	<link rel="stylesheet" href="http://at.alicdn.com/t/font_259571_py0uecagdjrcz0k9.css">
	<style type="text/css">
		#list {
			/*避免导航边框和列表背景边框重叠，看起来像两条边框似得；*/
			margin-top: -1px;
		}
	</style>
</head>
<body>
	<div class="layout home-layout" id="app">
		<header id="header" class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">Refund</h1>
		</header>
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item" href="./home-page.html">
				<span class="mui-icon iconfont icon-shanghu1"></span>
				<span class="mui-tab-label">Home</span>
			</a>
			<a class="mui-tab-item" href="./cart.html">
				<span class="mui-icon iconfont icon-gouwuche"><span class="mui-badge">9</span></span>
				<span class="mui-tab-label">Cart</span>
			</a>
			<a class="mui-tab-item mui-active" href="#Me">
				<span class="mui-icon iconfont icon-me"></span>
				<span class="mui-tab-label">Me</span>
			</a>
			<a class="mui-tab-item" href="./more.html">
				<span class="mui-icon iconfont icon-iconfonthome"></span>
				<span class="mui-tab-label">More</span>
			</a>
		</nav>
		<div class="mui-content">
			<article class="refund-content">
				<p>Reason of cancel</p>
				<form action="#">
					<div class="refundCancel">
						<textarea rows="8" id="refundTextarea"></textarea>
					</div>
	                <div class="container">
	                    <!--    照片添加    -->
	                    <div class="z_photo">
	                        <div class="z_file">
	                            <input type="file" name="file" id="file" value="" accept="image/*" multiple onchange="imgChange('z_photo','z_file');" />
	            				<div class="add-photo">Add Photo</div>
	                        </div>

	                    </div>
	                    <!--遮罩层-->
	                    <div class="z_mask">
	                        <!--弹出框-->
	                        <div class="z_alert">
	                            <p class="z_img">Are you sure you want to delete this picture?</p>
	                            <p class="tck">
	                                <span class="z_cancel">cancel</span>
	                                <span class="z_sure">sure</span>
	                            </p>
	                        </div>
	                    </div>
	                </div>
					<div class="submit-box">
						<input class="refundSubmit" id="refundSubmit" type="submit" name="Submit" value="SUBMIT" />
					</div> 
				</form>
			</article>

			<div class="refund-prompt">
				<p>The CSR will contact you within 5 days,beginning form the day you submit the refund application.</p>
			</div>
		</div>
	</div>

	<script src="../static/js/mui.min.js"></script>
    <script type="text/javascript">
        function imgChange(obj1, obj2) {
            var file = document.getElementById("file");
            var imgContainer = document.getElementsByClassName(obj1)[0];
            var fileList = file.files;
            var input = document.getElementsByClassName(obj2)[0];
            var imgArr = [];
            for (var i = 0; i < fileList.length; i++) {
                var imgUrl = window.URL.createObjectURL(file.files[i]);
                imgArr.push(imgUrl);
                var img = document.createElement("img");
                img.setAttribute("src", imgArr[i]);
                var imgAdd = document.createElement("div");
                imgAdd.setAttribute("class", "z_addImg");
                imgAdd.appendChild(img);
                imgContainer.appendChild(imgAdd);
            };
            imgRemove();
        };

        function imgRemove() {
            var imgList = document.getElementsByClassName("z_addImg");
            var mask = document.getElementsByClassName("z_mask")[0];
            var cancel = document.getElementsByClassName("z_cancel")[0];
            var sure = document.getElementsByClassName("z_sure")[0];
            for (var j = 0; j < imgList.length; j++) {
                imgList[j].index = j;
                imgList[j].onclick = function() {
                    var t = this;
                    mask.style.display = "block";
                    cancel.onclick = function() {
                        mask.style.display = "none";
                    };
                    sure.onclick = function() {
                        mask.style.display = "none";
                        t.style.display = "none";
                    };
                }
            };
        };
	    (function(mui) {
		    //输入框校验开始
			var refundSubmit = document.getElementById('refundSubmit');

			refundSubmit.addEventListener('tap',function() {
			var refundTextarea = document.getElementById('refundTextarea').value;
				if(refundTextarea == '') {
					mui.toast('Reason of cancel cannot be empty');
					return false
				}
				return mui.toast('ok');
			});    
		})(mui);      
    </script>
</body>
</html>